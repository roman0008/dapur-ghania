<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dapur Ghania - Paket Kue Hantaran & Hampers Exclusive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; -webkit-tap-highlight-color: transparent; }
        .modal-blur { backdrop-filter: blur(12px); background: rgba(0,0,0,0.5); }
        .card-shadow { box-shadow: 0 15px 35px -12px rgba(234, 88, 12, 0.15); }
        .nav-active { color: #ea580c; border-bottom: 3px solid #ea580c; }
        .filter-active { background-color: #ea580c; color: white; }
        input[type="date"], input[type="time"] { min-height: 3rem; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-[#FFFAF5] text-gray-800">

    <!-- Loader -->
    <div id="loader" class="fixed inset-0 z-[999] hidden items-center justify-center modal-blur">
        <div class="bg-white p-8 rounded-3xl shadow-xl text-center">
            <div class="animate-spin text-orange-600 text-3xl mb-4"><i class="fas fa-circle-notch"></i></div>
            <p id="loader-text" class="text-[10px] font-bold text-gray-600 uppercase tracking-widest">Memproses...</p>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="auth-screen" class="fixed inset-0 z-[200] hidden items-center justify-center p-6 modal-blur">
        <div class="bg-white w-full max-sm rounded-[2.5rem] p-8 shadow-2xl relative">
            <button onclick="closeAuth()" class="absolute top-6 right-6 text-gray-400"><i class="fas fa-times"></i></button>
            <div class="text-center mb-8">
                <h1 class="font-black text-orange-800 text-3xl tracking-tighter">DAPUR GHANIA</h1>
                <p class="text-gray-400 text-xs font-bold uppercase tracking-widest mt-2">Akses Akun Pelanggan</p>
            </div>
            <div class="flex bg-gray-100 p-1 rounded-2xl mb-6">
                <button id="tab-login" onclick="switchAuth('login')" class="flex-1 py-3 rounded-xl text-xs font-bold transition-all bg-white shadow-sm text-orange-600">LOGIN</button>
                <button id="tab-register" onclick="switchAuth('register')" class="flex-1 py-3 rounded-xl text-xs font-bold transition-all text-gray-500">DAFTAR</button>
            </div>
            <div id="auth-form" class="space-y-4">
                <input type="tel" id="auth-phone" class="w-full p-4 bg-gray-50 rounded-2xl border border-gray-100 font-bold text-sm focus:ring-2 focus:ring-orange-500 outline-none" placeholder="Nomor WhatsApp">
                <div id="reg-name-wrapper" class="hidden">
                    <input type="text" id="auth-name" class="w-full p-4 bg-gray-50 rounded-2xl border border-gray-100 font-bold text-sm focus:ring-2 focus:ring-orange-500 outline-none" placeholder="Nama Lengkap">
                </div>
                <input type="password" id="auth-pin" class="w-full p-4 bg-gray-50 rounded-2xl border border-gray-100 font-bold text-sm focus:ring-2 focus:ring-orange-500 outline-none" placeholder="PIN (6 Digit)">
                <button onclick="handleAuth()" class="w-full bg-orange-600 text-white py-4 rounded-2xl font-black shadow-lg active:scale-95 transition-all mt-4">KONFIRMASI</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-md border-b sticky top-0 z-50 p-4">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <div>
                <h1 class="font-black text-orange-800 tracking-tighter text-xl">DAPUR GHANIA</h1>
                <p id="welcome-user" class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Pesan Katering Mudah</p>
            </div>
            <div class="flex items-center gap-2">
                <div id="user-nav-container">
                    <button id="btn-login-trigger" onclick="openAuth()" class="flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-600 rounded-xl text-[10px] font-bold uppercase tracking-wider">
                        <i class="fas fa-user-circle text-lg"></i>
                        <span>Login</span>
                    </button>
                    <button id="btn-profile-trigger" onclick="handleUserAction()" class="hidden flex items-center gap-2 px-4 py-2 bg-orange-50 text-orange-600 rounded-xl text-[10px] font-bold uppercase tracking-wider">
                        <i class="fas fa-user-check text-lg"></i>
                        <span id="display-name">User</span>
                    </button>
                </div>
                <button onclick="openCart()" class="relative p-2.5 bg-orange-600 rounded-xl shadow-lg">
                    <i class="fas fa-shopping-basket text-lg text-white"></i>
                    <span id="cart-badge" class="absolute -top-1 -right-1 bg-red-500 text-white text-[9px] w-5 h-5 flex items-center justify-center rounded-full font-bold border-2 border-white">0</span>
                </button>
            </div>
        </div>
        <nav id="main-nav" class="max-w-4xl mx-auto mt-4 flex gap-6 border-t pt-2 hidden">
            <button onclick="showPage('home')" id="nav-home" class="text-[10px] font-black uppercase tracking-widest py-2 nav-active">Home</button>
            <button onclick="showPage('history')" id="nav-history" class="text-[10px] font-black uppercase tracking-widest py-2 text-gray-400">Riwayat</button>
            <button onclick="showPage('admin')" id="nav-admin" class="hidden text-[10px] font-black uppercase tracking-widest py-2 text-red-500">Admin Panel</button>
        </nav>
    </header>

    <!-- Page Content -->
    <main id="page-home" class="page-content max-w-4xl mx-auto p-4 pb-32">
        <div class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-[2.5rem] p-8 text-white mb-8 relative overflow-hidden shadow-xl">
            <div class="relative z-10">
                <h2 class="text-2xl font-black mb-1 uppercase tracking-tight leading-tight">Aneka Kue & Hampers Exclusive</h2>
                <p class="text-orange-100 text-sm opacity-90">Satu pesanan, beribu kenangan manis.</p>
            </div>
        </div>

        <div class="flex gap-2 mb-8 overflow-x-auto pb-2 no-scrollbar">
            <button onclick="filterCategory('All')" id="cat-All" class="filter-active px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-sm transition-all whitespace-nowrap">Semua</button>
            <button onclick="filterCategory('Paket Simple')" id="cat-Simple" class="bg-white text-gray-500 px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-sm transition-all whitespace-nowrap border border-gray-100">Paket Simple</button>
            <button onclick="filterCategory('Paket Exclusive')" id="cat-Exclusive" class="bg-white text-gray-500 px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-sm transition-all whitespace-nowrap border border-gray-100">Paket Exclusive</button>
            <button onclick="filterCategory('Kue Satuan')" id="cat-Satuan" class="bg-white text-gray-500 px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-sm transition-all whitespace-nowrap border border-gray-100">Kue Satuan</button>
        </div>

        <div id="product-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>
    </main>

    <main id="page-history" class="page-content hidden max-w-4xl mx-auto p-4 pb-32">
        <h2 class="font-black text-xl mb-6">Riwayat Pesanan</h2>
        <div id="history-list" class="space-y-4"></div>
    </main>

    <main id="page-admin" class="page-content hidden max-w-4xl mx-auto p-4 pb-32">
        <div class="flex justify-between items-center mb-6">
            <h2 class="font-black text-xl text-red-600">Admin Dashboard</h2>
            <button onclick="fetchAdminOrders()" class="p-2 bg-gray-100 rounded-lg text-xs font-bold uppercase">Refresh</button>
        </div>
        <div class="bg-white rounded-3xl border border-gray-100 overflow-hidden card-shadow">
            <div class="overflow-x-auto">
                <table class="w-full text-left text-xs">
                    <thead class="bg-gray-50 text-gray-400 uppercase font-black">
                        <tr>
                            <th class="p-4">Invoice</th>
                            <th class="p-4">Nama</th>
                            <th class="p-4">Total</th>
                            <th class="p-4">Status</th>
                            <th class="p-4">WA</th>
                        </tr>
                    </thead>
                    <tbody id="admin-orders-table" class="divide-y divide-gray-50"></tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Modal Cart & Checkout -->
    <div id="modal-cart" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4 modal-blur">
        <div class="bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
            <div class="p-6 border-b flex justify-between items-center bg-orange-50">
                <h2 class="text-xl font-black text-gray-900">Pesanan Saya</h2>
                <button onclick="closeCart()" class="text-gray-400"><i class="fas fa-times text-xl"></i></button>
            </div>
            <div id="cart-items" class="flex-1 overflow-y-auto p-6 space-y-4 bg-gray-50/50"></div>
            <div class="p-6 bg-white border-t space-y-3">
                <div class="flex justify-between items-center pt-2">
                    <span class="font-black text-gray-900">Total Akhir</span>
                    <span id="total-val" class="text-2xl font-black text-orange-600">Rp 0</span>
                </div>
                <button onclick="handleCheckoutProcess()" id="btn-to-checkout" class="w-full bg-orange-600 text-white py-4 rounded-2xl font-black shadow-lg">CHECKOUT SEKARANG</button>
            </div>
        </div>
    </div>

    <div id="modal-checkout" class="fixed inset-0 z-[110] hidden flex items-center justify-center p-4 modal-blur">
        <div class="bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[95vh]">
            <div class="p-6 border-b flex items-center gap-4 bg-orange-50">
                <button onclick="closeCheckout()" class="text-orange-800"><i class="fas fa-arrow-left"></i></button>
                <h2 class="text-lg font-black text-orange-900 uppercase tracking-tighter">Konfirmasi Pesanan</h2>
            </div>
            <div class="flex-1 overflow-y-auto p-8 space-y-5">
                <div class="grid grid-cols-2 gap-4">
                    <div class="space-y-1">
                        <label class="text-[10px] font-black uppercase text-gray-400">Nama</label>
                        <input type="text" id="f-nama" class="w-full p-4 bg-gray-50 rounded-2xl border border-gray-100 font-bold text-sm" readonly>
                    </div>
                    <div class="space-y-1">
                        <label class="text-[10px] font-black uppercase text-gray-400">Tgl Kirim</label>
                        <input type="date" id="f-tgl" class="w-full p-4 bg-gray-50 rounded-2xl border border-gray-100 font-bold text-sm">
                    </div>
                </div>
                <div class="space-y-1">
                    <label class="text-[10px] font-black uppercase text-gray-400">Metode Pembayaran</label>
                    <select id="f-bayar" onchange="updatePaymentUI()" class="w-full p-4 bg-gray-50 rounded-2xl border border-gray-100 font-bold text-sm outline-none">
                        <option value="Full Payment">Lunas (Full Payment)</option>
                        <option value="DP 50%">DP 50% (Bayar 2 Tahap)</option>
                    </select>
                    <div id="dp-info-container" class="hidden mt-4 p-4 bg-orange-50 rounded-2xl border border-orange-100 border-dashed">
                        <div class="space-y-2">
                            <div class="flex justify-between items-center bg-white p-3 rounded-xl shadow-sm">
                                <p class="text-[10px] font-black text-gray-400 uppercase">DP 50% (Skrg)</p>
                                <p class="font-black text-orange-600">Rp <span id="dp-amount-label">0</span></p>
                            </div>
                            <div class="flex justify-between items-center bg-gray-100 p-3 rounded-xl">
                                <p class="text-[10px] font-black text-gray-400 uppercase">Pelunasan (Nanti)</p>
                                <p class="font-black text-gray-500">Rp <span id="re-amount-label">0</span></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="space-y-1">
                    <label class="text-[10px] font-black uppercase text-gray-400">Alamat Lengkap</label>
                    <textarea id="f-alamat" rows="2" class="w-full p-4 bg-gray-50 rounded-2xl border border-gray-100 font-bold text-sm" placeholder="Contoh: Jl. Merdeka No. 123..."></textarea>
                </div>
            </div>
            <div class="p-6 bg-white border-t">
                <button onclick="submitOrder()" class="w-full bg-orange-600 text-white py-4 rounded-2xl font-black shadow-lg flex items-center justify-center gap-3 active:scale-95 transition-all">
                    <i class="fab fa-whatsapp text-xl"></i>
                    ORDER SEKARANG
                </button>
            </div>
        </div>
    </div>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzEPas8ooQvo9h23axzh-dr9lUMUIjavVUinh2zCu-4f44PgOeIqSY35pBPNqvXajSLpA/exec";
    const ADMIN_WA = "62895334016084";

    const PRODUCTS = [
        { id: 101, category: "Paket Exclusive", name: "Hampers Sultan A", price: 250000, desc: "Isi: 4 Toples Kue Kering Premium, Kartu Ucapan, Box Kayu Mewah.", img: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=400" },
        { id: 102, category: "Paket Exclusive", name: "Hantaran Lamaran Luxe", price: 450000, desc: "Paket Lengkap: Lapis Legit, Bolu Gulung, & 3 Macam Jajanan Pasar.", img: "https://images.unsplash.com/photo-1510812431401-41d2bd2722f3?w=400" },
        { id: 201, category: "Paket Simple", name: "Snack Box Arisan", price: 15000, desc: "Isi: Risol Mayo, Lemper Ayam, Sus Buah, & Air Mineral Gelas.", img: "https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?w=400" },
        { id: 303, category: "Kue Satuan", name: "Bolu Gulung Keju", price: 65000, desc: "Bolu lembut dengan parutan keju melimpah (Ukuran 20cm).", img: "https://images.unsplash.com/photo-1600613233345-0d4569b3f301?w=400" }
    ];

    let currentUser = JSON.parse(localStorage.getItem('ghania_user')) || null;
    let cart = [];
    let currentFilter = 'All';

    window.onload = () => { updateUIAuth(); renderProducts(); };

    function renderProducts() {
        const container = document.getElementById('product-list');
        const filtered = currentFilter === 'All' ? PRODUCTS : PRODUCTS.filter(p => p.category === currentFilter);
        container.innerHTML = filtered.map(p => `
            <div class="bg-white rounded-[2.5rem] overflow-hidden border border-gray-100 card-shadow transition-transform hover:scale-[1.02]">
                <div class="relative"><img src="${p.img}" class="w-full h-48 object-cover"></div>
                <div class="p-6">
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-black text-sm text-gray-800">${p.name}</h3>
                        <p class="text-orange-600 font-black text-xs">Rp ${p.price.toLocaleString()}</p>
                    </div>
                    <button onclick="addToCart(${p.id})" class="w-full py-4 bg-orange-50 text-orange-600 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-orange-600 hover:text-white transition-all active:scale-95">
                        Tambah Ke Keranjang
                    </button>
                </div>
            </div>`).join('');
    }

    function filterCategory(cat) { currentFilter = cat; renderProducts(); }
    function addToCart(id) { 
        const p = PRODUCTS.find(x => x.id === id);
        const exists = cart.find(i => i.id === id);
        if(exists) exists.qty++; else cart.push({...p, qty: 1});
        updateCartBadge(); showToast(`${p.name} ditambahkan`);
    }
    function updateCartBadge() { document.getElementById('cart-badge').innerText = cart.reduce((a, b) => a + b.qty, 0); }
    function openCart() { document.getElementById('modal-cart').classList.remove('hidden'); renderCartItems(); }
    function closeCart() { document.getElementById('modal-cart').classList.add('hidden'); }
    function adj(id, d) {
        const i = cart.find(x => x.id === id);
        if(i) { i.qty += d; if(i.qty <= 0) cart = cart.filter(x => x.id !== id); }
        renderCartItems(); updateCartBadge();
    }
    function renderCartItems() {
        const container = document.getElementById('cart-items');
        container.innerHTML = cart.map(i => `<div class="flex justify-between bg-white p-4 rounded-3xl border"><div>${i.name}</div><div class="flex gap-2"><button onclick="adj(${i.id},-1)">-</button>${i.qty}<button onclick="adj(${i.id},1)">+</button></div></div>`).join('');
        calculateTotal();
    }
    function calculateTotal() {
        const total = cart.reduce((a, b) => a + (b.price * b.qty), 0);
        document.getElementById('total-val').innerText = `Rp ${total.toLocaleString()}`;
        document.getElementById('dp-amount-label').innerText = Math.floor(total/2).toLocaleString();
        document.getElementById('re-amount-label').innerText = (total - Math.floor(total/2)).toLocaleString();
    }

    function updatePaymentUI() { document.getElementById('dp-info-container').classList.toggle('hidden', document.getElementById('f-bayar').value !== 'DP 50%'); }
    function handleCheckoutProcess() { if(!currentUser) { closeCart(); openAuth(); } else { closeCart(); document.getElementById('modal-checkout').classList.remove('hidden'); } }
    function closeCheckout() { document.getElementById('modal-checkout').classList.add('hidden'); }

    async function submitOrder() {
        const paymentType = document.getElementById('f-bayar').value;
        const total = parseInt(document.getElementById('total-val').innerText.replace(/\D/g, ''));
        const date = document.getElementById('f-tgl').value;
        const addr = document.getElementById('f-alamat').value;
        if(!date || !addr) return alert("Isi Tanggal & Alamat!");

        showLoader(true, "Memproses...");
        const invoiceID = `INV/${new Date().toISOString().slice(0,10).replace(/-/g,'')}/${Math.floor(Math.random()*999)}`;
        const itemText = cart.map(i => `${i.name} (x${i.qty})`).join(", ");

        const orderData = {
            action: "addOrder",
            invoice: invoiceID,
            name: currentUser.name,
            phone: currentUser.phone,
            total: total,
            payment_type: paymentType, // INI KUNCINYA: Pastikan nama field sama dengan di GSheet
            address: addr,
            date: date,
            items: itemText
        };

        const fd = new URLSearchParams();
        for(let k in orderData) fd.append(k, orderData[k]);
        
        try {
            await fetch(SCRIPT_URL, { method: 'POST', body: fd, mode: 'no-cors' });
            showLoader(false);
            const msg = `*ORDER BARU*\nInv: ${invoiceID}\nMetode: ${paymentType}\nTotal: Rp ${total.toLocaleString()}\nAlamat: ${addr}`;
            window.open(`https://wa.me/${ADMIN_WA}?text=${encodeURIComponent(msg)}`, '_blank');
            location.reload();
        } catch(e) { showLoader(false); alert("Gagal kirim."); }
    }

    function showPage(pageId) {
        document.querySelectorAll('.page-content').forEach(p => p.classList.add('hidden'));
        document.getElementById(`page-${pageId}`).classList.remove('hidden');
        if(pageId === 'history') fetchUserHistory();
        if(pageId === 'admin') fetchAdminOrders();
    }

    // --- PERBAIKAN DI BAGIAN ADMIN & HISTORY (Fix N/A) ---
    function fetchAdminOrders() {
        document.getElementById('admin-orders-table').innerHTML = `<tr><td colspan="5" class="p-4 text-center">Loading...</td></tr>`;
        injectScript(`${SCRIPT_URL}?action=getAllOrders&callback=adminCb`);
    }

    window.adminCb = (res) => {
        if(!res || !res.data) return;
        document.getElementById('admin-orders-table').innerHTML = res.data.map(o => {
            // Kita coba ambil dari berbagai kemungkinan nama properti agar tidak N/A
            const paymentInfo = o.payment_type || o.paymentType || o.metode || "Full Payment";
            return `
            <tr class="hover:bg-gray-50 border-b">
                <td class="p-4 font-bold text-orange-600 text-[10px]">${o.invoice || 'INV'}</td>
                <td class="p-4 text-[10px] font-bold">${o.name || '-'}</td>
                <td class="p-4">
                    <p class="font-black">Rp ${parseInt(o.total || 0).toLocaleString()}</p>
                    <p class="text-[9px] text-gray-400 font-bold uppercase">${paymentInfo}</p>
                </td>
                <td class="p-4">
                    <span class="px-2 py-1 rounded-lg bg-gray-100 text-[9px] font-bold uppercase">${o.status || 'PROSES'}</span>
                </td>
                <td class="p-4"><button onclick="window.open('https://wa.me/${o.phone}')"><i class="fab fa-whatsapp text-green-500"></i></button></td>
            </tr>`;
        }).join('');
    };

    function fetchUserHistory() {
        document.getElementById('history-list').innerHTML = `<p class="text-center text-xs py-10">Memuat...</p>`;
        injectScript(`${SCRIPT_URL}?action=getOrders&phone=${currentUser.phone}&callback=historyCb`);
    }

    window.historyCb = (res) => {
        const list = document.getElementById('history-list');
        if(!res || !res.data || res.data.length === 0) { list.innerHTML = `<p class="text-center py-10">Belum ada pesanan.</p>`; return; }
        list.innerHTML = res.data.map(o => `
            <div class="bg-white p-6 rounded-3xl border mb-3">
                <div class="flex justify-between mb-2">
                    <span class="text-[9px] font-black text-gray-400">${o.invoice}</span>
                    <span class="text-[9px] font-black text-orange-600 uppercase">${o.payment_type || o.paymentType || 'Full Payment'}</span>
                </div>
                <p class="text-xs font-bold">${o.items}</p>
                <p class="mt-2 font-black text-orange-600">Rp ${parseInt(o.total).toLocaleString()}</p>
            </div>`).join('');
    };

    // Auth & Utils
    function openAuth() { document.getElementById('auth-screen').classList.replace('hidden', 'flex'); }
    function closeAuth() { document.getElementById('auth-screen').classList.replace('flex', 'hidden'); }
    function switchAuth(m) { authMode = m; document.getElementById('reg-name-wrapper').classList.toggle('hidden', m==='login'); }
    let authMode = 'login';
    async function handleAuth() {
        const p = document.getElementById('auth-phone').value, pin = document.getElementById('auth-pin').value, n = document.getElementById('auth-name').value;
        showLoader(true, "Auth...");
        injectScript(`${SCRIPT_URL}?action=${p===ADMIN_WA?'loginAdmin':authMode}&phone=${p}&pin=${pin}&name=${n}&callback=authCallback`);
    }
    window.authCallback = (res) => {
        showLoader(false);
        if(res.success) {
            currentUser = { phone: document.getElementById('auth-phone').value, name: res.name || document.getElementById('auth-name').value };
            localStorage.setItem('ghania_user', JSON.stringify(currentUser));
            location.reload();
        } else alert(res.message);
    };
    function updateUIAuth() {
        if(currentUser) {
            document.getElementById('btn-login-trigger').classList.add('hidden');
            document.getElementById('btn-profile-trigger').classList.remove('hidden');
            document.getElementById('main-nav').classList.remove('hidden');
            document.getElementById('display-name').innerText = currentUser.name.split(' ')[0];
            if(currentUser.phone === ADMIN_WA) document.getElementById('nav-admin').classList.remove('hidden');
            document.getElementById('f-nama').value = currentUser.name;
        }
    }
    function handleUserAction() { if(confirm("Logout?")) { localStorage.clear(); location.reload(); } }
    function injectScript(url) { const s = document.createElement('script'); s.src = url; document.body.appendChild(s); setTimeout(()=>s.remove(),2000); }
    function showLoader(v, t) { document.getElementById('loader').classList.toggle('hidden', !v); document.getElementById('loader').classList.toggle('flex', v); document.getElementById('loader-text').innerText = t; }
    function showToast(m) { const t = document.createElement('div'); t.className = "fixed bottom-24 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-6 py-3 rounded-full text-[10px] font-black z-[300]"; t.innerText = m; document.body.appendChild(t); setTimeout(()=>t.remove(),2000); }
</script>
</body>
</html>
